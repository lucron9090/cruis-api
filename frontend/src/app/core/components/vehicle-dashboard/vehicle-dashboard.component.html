<div class="dashboard-root" *ngIf="vehicleInfo$ | async as vehicle">
  <header class="hero">
    <div class="hero__id">
      <div class="hero__badge" aria-hidden="true">ğŸš—</div>
      <div class="hero__text">
        <h1 class="hero__title">{{ vehicle.name }}</h1>
        <p class="hero__meta" *ngIf="vehicle.vin">VIN {{ vehicle.vin }}</p>
      </div>
    </div>
    <a class="hero__action btn btn-secondary" [routerLink]="['/vehicles']">Change Vehicle</a>
  </header>

  <section class="sections">
    <a class="tile" [routerLink]="[]" [queryParams]="{articleIdTrail: '-998'}" queryParamsHandling="merge">
      <span class="tile__icon">ğŸ—“ï¸</span>
      <span class="tile__content">
        <span class="tile__title">Maintenance Schedules</span>
        <span class="tile__desc">Intervals and required services</span>
      </span>
      <span class="tile__meta" *ngIf="(kpiCounts$ | async) as counts">{{ counts['Maint. Schedules'] || counts['Maintenance Schedules'] || 'â€”' }}</span>
      <span class="tile__arrow">â†’</span>
    </a>

    <a class="tile" [routerLink]="['/docs/Procedures']" queryParamsHandling="merge">
      <span class="tile__icon">ğŸ§°</span>
      <span class="tile__content">
        <span class="tile__title">Repair Procedures</span>
        <span class="tile__desc">Step-by-step guides</span>
      </span>
      <span class="tile__meta" *ngIf="(kpiCounts$ | async) as counts">{{ counts['Procedures'] || 'â€”' }}</span>
      <span class="tile__arrow">â†’</span>
    </a>

    <a class="tile" [routerLink]="['/docs/Diagrams']" queryParamsHandling="merge">
      <span class="tile__icon">ğŸ§·</span>
      <span class="tile__content">
        <span class="tile__title">Diagrams</span>
        <span class="tile__desc">Wiring and component layouts</span>
      </span>
      <span class="tile__meta" *ngIf="(kpiCounts$ | async) as counts">{{ counts['Diagrams'] || 'â€”' }}</span>
      <span class="tile__arrow">â†’</span>
    </a>

    <a class="tile" [routerLink]="['/docs/Diagnostic Codes']" queryParamsHandling="merge">
      <span class="tile__icon">âš ï¸</span>
      <span class="tile__content">
        <span class="tile__title">Diagnostic Codes</span>
        <span class="tile__desc">DTC definitions and fixes</span>
      </span>
      <span class="tile__meta" *ngIf="(kpiCounts$ | async) as counts">{{ counts['Diagnostic Codes'] || 'â€”' }}</span>
      <span class="tile__arrow">â†’</span>
    </a>

    <a class="tile" [routerLink]="['/docs/Specs']" queryParamsHandling="merge">
      <span class="tile__icon">ğŸ“</span>
      <span class="tile__content">
        <span class="tile__title">Specifications</span>
        <span class="tile__desc">Capacities and technical data</span>
      </span>
      <span class="tile__meta" *ngIf="(kpiCounts$ | async) as counts">{{ counts['Specs'] || 'â€”' }}</span>
      <span class="tile__arrow">â†’</span>
    </a>

    <a class="tile" [routerLink]="['/docs/Service Bulletins']" queryParamsHandling="merge">
      <span class="tile__icon">ğŸ“£</span>
      <span class="tile__content">
        <span class="tile__title">Service Bulletins</span>
        <span class="tile__desc">TSBs and updates</span>
      </span>
      <span class="tile__meta" *ngIf="(kpiCounts$ | async) as counts">{{ counts['Service Bulletins'] || 'â€”' }}</span>
      <span class="tile__arrow">â†’</span>
    </a>
  </section>

  <section class="continue" *ngIf="bookmarkParams$ | async as params">
    <a class="tile tile--continue" [routerLink]="[]" [queryParams]="params" queryParamsHandling="merge">
      <span class="tile__icon">ğŸ“Œ</span>
      <span class="tile__content">
        <span class="tile__title">Continue where you left off</span>
        <span class="tile__desc">Open your saved bookmark</span>
      </span>
      <span class="tile__arrow">Open</span>
    </a>
  </section>

  <section class="recent" *ngIf="recentArticles$ | async as recent">
    <h3 class="section-title">Recent results</h3>
    <div class="recent__list">
      <a class="recent__item" *ngFor="let item of recent"
         [routerLink]="[]"
         [queryParams]="{ articleIdTrail: item.id }"
         queryParamsHandling="merge"
         title="{{ item.title || item.id }}">
        <span class="recent__title">{{ item.title || 'Untitled' }}</span>
        <span class="recent__arrow">â†’</span>
      </a>
    </div>
  </section>

  <section class="helper">
    <div class="helper__card">
      <div class="helper__icon">ğŸ’¡</div>
      <div class="helper__text">
        <h3>Pro tip</h3>
        <p>Use the left panel to browse categories or the search at the top to jump directly to a topic.</p>
      </div>
    </div>
  </section>
</div>

