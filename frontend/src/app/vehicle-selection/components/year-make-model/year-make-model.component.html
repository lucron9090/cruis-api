<div class="vehicle-selection-container">
  <!-- Header Section -->
  <header class="app-header">
    <div class="container">
      <div class="header-content">
        <div class="logo-section">
          <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L2 7V11C2 16.55 6.84 21.74 12 23C17.16 21.74 22 16.55 22 11V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 8V16M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h1 class="app-title">Motor M1 Application</h1>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <div class="content-grid">
        <!-- Left Side: Welcome Section -->
        <div class="welcome-section">
          <div class="welcome-card">
            <div class="icon-wrapper">
              <svg class="welcome-icon" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="100" cy="100" r="80" stroke="#2196f3" stroke-width="3" fill="none"/>
                <circle cx="70" cy="100" r="15" fill="#2196f3"/>
                <circle cx="130" cy="100" r="15" fill="#2196f3"/>
                <path d="M40 60 Q100 20 160 60" stroke="#2196f3" stroke-width="3" fill="none"/>
                <path d="M40 140 Q100 180 160 140" stroke="#2196f3" stroke-width="3" fill="none"/>
                <rect x="50" y="90" width="100" height="20" fill="#2196f3" opacity="0.3"/>
              </svg>
            </div>
            <h2 class="welcome-title">Vehicle Information System</h2>
            <p class="welcome-description">Select your vehicle to access detailed maintenance schedules, repair information, and technical documentation.</p>
            <div class="feature-list">
              <div class="feature-item">
                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M21 12V19C21 20.1 20.1 21 19 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Comprehensive Documentation</span>
              </div>
              <div class="feature-item">
                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span>Maintenance Schedules</span>
              </div>
              <div class="feature-item">
                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14.7 6.3C15.1 5.9 15.6 5.7 16.2 5.7C17.4 5.7 18.3 6.6 18.3 7.8C18.3 8.4 18.1 8.9 17.7 9.3L8.8 18.2L4 19L4.8 14.2L13.7 5.3C14.1 4.9 14.6 4.7 15.2 4.7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Technical Specifications</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Side: Selection Form -->
        <div class="selection-section">
          <div class="selection-card">
            <div class="card-header">
              <h3 class="card-title">Select Your Vehicle</h3>
              <p class="card-subtitle">Choose year, make, and model to continue</p>
            </div>

            <div class="form-container">
              <!-- Year Selection -->
              <div class="form-group">
                <label for="yearSelector" class="form-label">
                  <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                    <path d="M16 2V6M8 2V6M3 10H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                  Vehicle Year
                </label>
                <select
                  id="yearSelector"
                  class="form-select"
                  [disabled]="!(years$ | async)?.length"
                  [ngModel]="year$ | async"
                  (ngModelChange)="setYear($event)"
                >
                  <option disabled hidden [ngValue]="undefined">Select Vehicle Year</option>
                  <option *ngFor="let year of years$ | async" [ngValue]="year">{{ year }}</option>
                </select>
              </div>

              <!-- Make Selection -->
              <div class="form-group">
                <label for="makeSelector" class="form-label">
                  <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 9L12 2L21 9V20C21 21.1 20.1 22 19 22H5C3.9 22 3 21.1 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Vehicle Make
                </label>
                <select
                  id="makeSelector"
                  class="form-select"
                  [disabled]="!(makes$ | async)?.length"
                  [ngModel]="make$ | async"
                  (ngModelChange)="setMake($event)"
                >
                  <option disabled hidden [ngValue]="undefined">Select Vehicle Make</option>
                  <option *ngFor="let make of makes$ | async" [ngValue]="make">{{ make }}</option>
                </select>
              </div>

              <!-- Model Selection -->
              <div class="form-group">
                <label for="modelSelector" class="form-label">
                  <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 17H4C3.45 17 2.98 16.78 2.59 16.41C2.22 16.02 2 15.55 2 15V11L4.48 5.22C4.64 4.84 5 4.5 5.5 4.5H18.5C19 4.5 19.36 4.84 19.52 5.22L22 11V15C22 15.55 21.78 16.02 21.41 16.41C21.02 16.78 20.55 17 20 17H19M6 19.5C6 20.33 6.67 21 7.5 21C8.33 21 9 20.33 9 19.5C9 18.67 8.33 18 7.5 18C6.67 18 6 18.67 6 19.5M15 19.5C15 20.33 15.67 21 16.5 21C17.33 21 18 20.33 18 19.5C18 18.67 17.33 18 16.5 18C15.67 18 15 18.67 15 19.5Z" stroke="currentColor" stroke-width="1.5"/>
                  </svg>
                  Vehicle Model
                </label>
                <select
                  id="modelSelector"
                  class="form-select"
                  [disabled]="!(models$ | async)?.length"
                  [ngModel]="model"
                  (ngModelChange)="setModel($event)"
                >
                  <option disabled hidden [ngValue]="undefined">Select Vehicle Model</option>
                  <option *ngFor="let model of models$ | async" [ngValue]="model">{{ model.model }}</option>
                </select>
              </div>

              <!-- Engine Selection (if applicable) -->
              <div class="form-group" *ngIf="hasEngines()">
                <label for="engineSelector" class="form-label">
                  <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2V4M12 20V22M4 12H2M6.31 6.31L4.9 4.9M17.69 6.31L19.1 4.9M6.31 17.69L4.9 19.1M17.69 17.69L19.1 19.1M22 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                  </svg>
                  Vehicle Engine
                </label>
                <select
                  id="engineSelector"
                  class="form-select"
                  [disabled]="!engines?.length"
                  [ngModel]="engine"
                  (ngModelChange)="setEngine($event)"
                >
                  <option disabled hidden [ngValue]="undefined">Select Vehicle Engine</option>
                  <option *ngFor="let engine of engines" [ngValue]="engine">{{ engine.name }}</option>
                </select>
              </div>

              <!-- VIN Search Section -->
              <div class="vin-section" *ngIf="(userSettingsService.ymmeVinSearchMode$ | async) === 'Enabled'">
                <div class="divider">
                  <span class="divider-text">OR</span>
                </div>
                <div class="vin-search-card">
                  <h4 class="vin-title">Search by VIN</h4>
                  <p class="vin-subtitle">Enter your 10-17 character VIN number</p>
                  <div class="vin-input-group">
                    <label for="vinSearch" class="sr-only">Enter VIN</label>
                    <input
                      [(ngModel)]="vin"
                      name="vinSearch"
                      class="form-input vin-input"
                      (ngModelChange)="clearErrorMsg()"
                      id="vinSearchTxt"
                      placeholder="Enter VIN (Min. of 10 characters)"
                      type="text"
                      maxlength="17"
                    />
                    <button
                      class="btn btn-primary vin-btn"
                      type="submit"
                      id="vinSearchBtn"
                      [disabled]="vin.length < 10"
                      (click)="findVehicleWithVIN(vin)"
                    >
                      <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                        <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                      </svg>
                      Search
                    </button>
                  </div>
                  <mtr-horizontal-circles-loader *ngIf="isAwaitingApiResponse"></mtr-horizontal-circles-loader>
                  <div class="error-message" *ngIf="isInvalidVin">
                    <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                      <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Unable to look up vehicle with the supplied VIN.
                  </div>
                  <div class="error-message" *ngIf="unAuthorizedVinError">
                    <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                      <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    {{ unAuthorizedVinError }}
                  </div>
                </div>
              </div>

              <!-- Recent Vehicles Section -->
              <div class="recent-section" *ngIf="(vehicleSelectionFacade.hasVehicleSelected$ | async) && (userSettingsService.recentVehiclesMode$ | async) === 'Enabled'">
                <div class="divider">
                  <span class="divider-text">OR</span>
                </div>
                <div class="form-group">
                  <label for="recentVehicle" class="form-label">
                    <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                      <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Recent Vehicles
                  </label>
                  <select id="recentVehicle" class="form-select" [ngModel]="recentVehicle" (ngModelChange)="navigateToVehicle($event)">
                    <option disabled hidden [ngValue]="undefined">Select Recent Vehicle</option>
                    <option *ngFor="let vehicle of vehicleSelectionFacade.getSelectedVehicles()" [ngValue]="vehicle">
                      {{ vehicle.vehicleName }}
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="container">
      <p class="footer-text">&copy; 2025 Motor M1 Application. All rights reserved.</p>
    </div>
  </footer>
</div>
